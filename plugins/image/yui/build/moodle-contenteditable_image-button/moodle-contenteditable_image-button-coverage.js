if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-contenteditable_image-button/moodle-contenteditable_image-button.js']) {
   __coverage__['build/moodle-contenteditable_image-button/moodle-contenteditable_image-button.js'] = {"path":"build/moodle-contenteditable_image-button/moodle-contenteditable_image-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":47},"end":{"line":1,"column":66}}},"2":{"name":"(anonymous_2)","line":6,"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":28}}},"3":{"name":"(anonymous_3)","line":7,"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":42}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":19},"end":{"line":32,"column":31}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":23},"end":{"line":38,"column":40}}},"6":{"name":"(anonymous_6)","line":46,"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":28}}},"7":{"name":"(anonymous_7)","line":82,"loc":{"start":{"line":82,"column":23},"end":{"line":82,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":115,"column":50}},"2":{"start":{"line":3,"column":0},"end":{"line":112,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":28,"column":10}},"4":{"start":{"line":8,"column":12},"end":{"line":8,"column":61}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":23}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":89}},"9":{"start":{"line":14,"column":12},"end":{"line":27,"column":13}},"10":{"start":{"line":15,"column":16},"end":{"line":20,"column":19}},"11":{"start":{"line":22,"column":16},"end":{"line":22,"column":34}},"12":{"start":{"line":23,"column":16},"end":{"line":23,"column":97}},"13":{"start":{"line":24,"column":16},"end":{"line":24,"column":105}},"14":{"start":{"line":25,"column":16},"end":{"line":25,"column":32}},"15":{"start":{"line":26,"column":16},"end":{"line":26,"column":60}},"16":{"start":{"line":30,"column":8},"end":{"line":30,"column":115}},"17":{"start":{"line":33,"column":8},"end":{"line":33,"column":57}},"18":{"start":{"line":34,"column":8},"end":{"line":34,"column":27}},"19":{"start":{"line":36,"column":8},"end":{"line":36,"column":111}},"20":{"start":{"line":39,"column":8},"end":{"line":44,"column":9}},"21":{"start":{"line":40,"column":12},"end":{"line":40,"column":43}},"22":{"start":{"line":41,"column":12},"end":{"line":41,"column":43}},"23":{"start":{"line":42,"column":12},"end":{"line":42,"column":39}},"24":{"start":{"line":43,"column":12},"end":{"line":43,"column":44}},"25":{"start":{"line":47,"column":8},"end":{"line":47,"column":27}},"26":{"start":{"line":48,"column":8},"end":{"line":48,"column":48}},"27":{"start":{"line":50,"column":8},"end":{"line":50,"column":71}},"28":{"start":{"line":52,"column":8},"end":{"line":52,"column":37}},"29":{"start":{"line":53,"column":8},"end":{"line":53,"column":67}},"30":{"start":{"line":54,"column":8},"end":{"line":54,"column":37}},"31":{"start":{"line":55,"column":8},"end":{"line":55,"column":69}},"32":{"start":{"line":56,"column":8},"end":{"line":56,"column":39}},"33":{"start":{"line":57,"column":8},"end":{"line":57,"column":70}},"34":{"start":{"line":58,"column":8},"end":{"line":58,"column":40}},"35":{"start":{"line":59,"column":8},"end":{"line":80,"column":9}},"36":{"start":{"line":60,"column":12},"end":{"line":60,"column":86}},"37":{"start":{"line":61,"column":12},"end":{"line":61,"column":101}},"38":{"start":{"line":63,"column":12},"end":{"line":65,"column":13}},"39":{"start":{"line":64,"column":16},"end":{"line":64,"column":69}},"40":{"start":{"line":66,"column":12},"end":{"line":68,"column":13}},"41":{"start":{"line":67,"column":16},"end":{"line":67,"column":71}},"42":{"start":{"line":69,"column":12},"end":{"line":69,"column":31}},"43":{"start":{"line":71,"column":12},"end":{"line":75,"column":13}},"44":{"start":{"line":72,"column":16},"end":{"line":72,"column":70}},"45":{"start":{"line":74,"column":16},"end":{"line":74,"column":69}},"46":{"start":{"line":83,"column":8},"end":{"line":106,"column":104}},"47":{"start":{"line":108,"column":8},"end":{"line":108,"column":86}},"48":{"start":{"line":109,"column":8},"end":{"line":109,"column":91}},"49":{"start":{"line":110,"column":8},"end":{"line":110,"column":23}}},"branchMap":{"1":{"line":3,"type":"binary-expr","locations":[{"start":{"line":3,"column":26},"end":{"line":3,"column":49}},{"start":{"line":3,"column":53},"end":{"line":112,"column":1}}]},"2":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":10,"column":12}},{"start":{"line":10,"column":12},"end":{"line":10,"column":12}}]},"3":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":12},"end":{"line":14,"column":12}},{"start":{"line":14,"column":12},"end":{"line":14,"column":12}}]},"4":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":8}},{"start":{"line":39,"column":8},"end":{"line":39,"column":8}}]},"5":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":59,"column":8}},{"start":{"line":59,"column":8},"end":{"line":59,"column":8}}]},"6":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":22}},{"start":{"line":59,"column":26},"end":{"line":59,"column":36}}]},"7":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":63,"column":12}},{"start":{"line":63,"column":12},"end":{"line":63,"column":12}}]},"8":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":12},"end":{"line":66,"column":12}},{"start":{"line":66,"column":12},"end":{"line":66,"column":12}}]},"9":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"10":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":16},"end":{"line":71,"column":34}},{"start":{"line":71,"column":38},"end":{"line":71,"column":80}}]}},"code":["(function () { YUI.add('moodle-contenteditable_image-button', function (Y, NAME) {","","M.contenteditable_image = M.contenteditable_image || {","    dialogue : null,","    selection : null,","    init : function(params) {","        var display_chooser = function(e) {","            var elementid = this.getAttribute('data-editor');","            e.preventDefault();","            if (!M.editor_contenteditable.is_active(elementid)) {","                return;","            }","            M.contenteditable_image.selection = M.editor_contenteditable.get_selection();","            if (M.contenteditable_image.selection !== false) {","                var dialogue = new M.core.dialogue({","                    visible: false,","                    modal: true,","                    close: true,","                    draggable: true","                });","","                dialogue.render();","                dialogue.set('bodyContent', M.contenteditable_image.get_form_content(elementid));","                dialogue.set('headerContent', M.util.get_string('createimage', 'contenteditable_image'));","                dialogue.show();","                M.contenteditable_image.dialogue = dialogue;","            }","        };","","        M.editor_contenteditable.add_toolbar_button(params.elementid, 'image', params.icon, display_chooser, this);","    },","    open_browser : function(e) {","        var elementid = this.getAttribute('data-editor');","        e.preventDefault();","","        M.editor_contenteditable.show_filepicker(elementid, 'image', M.contenteditable_image.browser_callback);","    },","    browser_callback : function(params) {","        if (params.url !== '') {","            var input = Y.one('#urlentry');","            input.set('value', params.url);","            input = Y.one('#altentry');","            input.set('value', params.file);","        }","    },","    set_image : function(e) {","        e.preventDefault();","        M.contenteditable_image.dialogue.hide();","","        var input = e.currentTarget.get('parentNode').one('#urlentry');","","        var url = input.get('value');","        input = e.currentTarget.get('parentNode').one('#altentry');","        var alt = input.get('value');","        input = e.currentTarget.get('parentNode').one('#widthentry');","        var width = input.get('value');","        input = e.currentTarget.get('parentNode').one('#heightentry');","        var height = input.get('value');","        if (url !== '' && alt !== '') {","            M.editor_contenteditable.set_selection(M.contenteditable_image.selection);","            var imagehtml = '<img src=\"' + Y.Escape.html(url) + '\" alt=\"' + Y.Escape.html(alt) + '\"';","","            if (width) {","                imagehtml += ' width=\"' + Y.Escape.html(width) + '\"';","            }","            if (height) {","                imagehtml += ' height=\"' + Y.Escape.html(height) + '\"';","            }","            imagehtml += '\"/>';","","            if (document.selection && document.selection.createRange().pasteHTML) {","                document.selection.createRange().pasteHTML(imagehtml);","            } else {","                document.execCommand('insertHTML', false, imagehtml);","            }","             //   M.contenteditable_image.pasteHTML(imagehtml);","           // } else {","            //}"," //           document.execCommand('enableObjectResizing', false, true);","        }","    },","    get_form_content : function(elementid) {","        var content = Y.Node.create('<form>' +","                             '<label for=\"urlentry\">' + M.util.get_string('enterurl', 'contenteditable_image') +","                             '</label><br/>' +","                             '<input type=\"url\" value=\"\" id=\"urlentry\" size=\"64\"/>' +","                             '<label for=\"altentry\">' + M.util.get_string('enteralt', 'contenteditable_image') +","                             '</label><br/>' +","                             '<input type=\"text\" value=\"\" id=\"altentry\" size=\"64\" required=\"true\"/>' +","                             '<label for=\"widthentry\">' + M.util.get_string('width', 'contenteditable_image') +","                             '</label><br/>' +","                             '<input type=\"text\" value=\"\" id=\"widthentry\" size=\"10\"/>' +","                             '<br/>' +","                             '<label for=\"heightentry\">' + M.util.get_string('height', 'contenteditable_image') +","                             '</label><br/>' +","                             '<input type=\"text\" value=\"\" id=\"heightentry\" size=\"10\"/>' +","                             '<br/>' +","                             '<button id=\"openimagebrowser\" data-editor=\"' + Y.Escape.html(elementid) + '\">' +","                             M.util.get_string('browserepositories', 'contenteditable_image') +","                             '</button>' +","                             '<hr/>' +","                             '<button id=\"urlentrysubmit\">' +","                             M.util.get_string('createimage', 'contenteditable_image') +","                             '</button>' +","                             '</form>' +","                             '<hr/>' + M.util.get_string('accessibilityhint', 'contenteditable_image'));","","        content.one('#urlentrysubmit').on('click', M.contenteditable_image.set_image);","        content.one('#openimagebrowser').on('click', M.contenteditable_image.open_browser);","        return content;","    }","};","","","}, '@VERSION@', {\"requires\": [\"node\", \"escape\"]});","","}());"]};
}
var __cov_eB9RHsg5wXgocQW6hl_8IA = __coverage__['build/moodle-contenteditable_image-button/moodle-contenteditable_image-button.js'];
__cov_eB9RHsg5wXgocQW6hl_8IA.s['1']++;YUI.add('moodle-contenteditable_image-button',function(Y,NAME){__cov_eB9RHsg5wXgocQW6hl_8IA.f['1']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['2']++;M.contenteditable_image=(__cov_eB9RHsg5wXgocQW6hl_8IA.b['1'][0]++,M.contenteditable_image)||(__cov_eB9RHsg5wXgocQW6hl_8IA.b['1'][1]++,{dialogue:null,selection:null,init:function(params){__cov_eB9RHsg5wXgocQW6hl_8IA.f['2']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['3']++;var display_chooser=function(e){__cov_eB9RHsg5wXgocQW6hl_8IA.f['3']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['4']++;var elementid=this.getAttribute('data-editor');__cov_eB9RHsg5wXgocQW6hl_8IA.s['5']++;e.preventDefault();__cov_eB9RHsg5wXgocQW6hl_8IA.s['6']++;if(!M.editor_contenteditable.is_active(elementid)){__cov_eB9RHsg5wXgocQW6hl_8IA.b['2'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['7']++;return;}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['2'][1]++;}__cov_eB9RHsg5wXgocQW6hl_8IA.s['8']++;M.contenteditable_image.selection=M.editor_contenteditable.get_selection();__cov_eB9RHsg5wXgocQW6hl_8IA.s['9']++;if(M.contenteditable_image.selection!==false){__cov_eB9RHsg5wXgocQW6hl_8IA.b['3'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['10']++;var dialogue=new M.core.dialogue({visible:false,modal:true,close:true,draggable:true});__cov_eB9RHsg5wXgocQW6hl_8IA.s['11']++;dialogue.render();__cov_eB9RHsg5wXgocQW6hl_8IA.s['12']++;dialogue.set('bodyContent',M.contenteditable_image.get_form_content(elementid));__cov_eB9RHsg5wXgocQW6hl_8IA.s['13']++;dialogue.set('headerContent',M.util.get_string('createimage','contenteditable_image'));__cov_eB9RHsg5wXgocQW6hl_8IA.s['14']++;dialogue.show();__cov_eB9RHsg5wXgocQW6hl_8IA.s['15']++;M.contenteditable_image.dialogue=dialogue;}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['3'][1]++;}};__cov_eB9RHsg5wXgocQW6hl_8IA.s['16']++;M.editor_contenteditable.add_toolbar_button(params.elementid,'image',params.icon,display_chooser,this);},open_browser:function(e){__cov_eB9RHsg5wXgocQW6hl_8IA.f['4']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['17']++;var elementid=this.getAttribute('data-editor');__cov_eB9RHsg5wXgocQW6hl_8IA.s['18']++;e.preventDefault();__cov_eB9RHsg5wXgocQW6hl_8IA.s['19']++;M.editor_contenteditable.show_filepicker(elementid,'image',M.contenteditable_image.browser_callback);},browser_callback:function(params){__cov_eB9RHsg5wXgocQW6hl_8IA.f['5']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['20']++;if(params.url!==''){__cov_eB9RHsg5wXgocQW6hl_8IA.b['4'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['21']++;var input=Y.one('#urlentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['22']++;input.set('value',params.url);__cov_eB9RHsg5wXgocQW6hl_8IA.s['23']++;input=Y.one('#altentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['24']++;input.set('value',params.file);}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['4'][1]++;}},set_image:function(e){__cov_eB9RHsg5wXgocQW6hl_8IA.f['6']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['25']++;e.preventDefault();__cov_eB9RHsg5wXgocQW6hl_8IA.s['26']++;M.contenteditable_image.dialogue.hide();__cov_eB9RHsg5wXgocQW6hl_8IA.s['27']++;var input=e.currentTarget.get('parentNode').one('#urlentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['28']++;var url=input.get('value');__cov_eB9RHsg5wXgocQW6hl_8IA.s['29']++;input=e.currentTarget.get('parentNode').one('#altentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['30']++;var alt=input.get('value');__cov_eB9RHsg5wXgocQW6hl_8IA.s['31']++;input=e.currentTarget.get('parentNode').one('#widthentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['32']++;var width=input.get('value');__cov_eB9RHsg5wXgocQW6hl_8IA.s['33']++;input=e.currentTarget.get('parentNode').one('#heightentry');__cov_eB9RHsg5wXgocQW6hl_8IA.s['34']++;var height=input.get('value');__cov_eB9RHsg5wXgocQW6hl_8IA.s['35']++;if((__cov_eB9RHsg5wXgocQW6hl_8IA.b['6'][0]++,url!=='')&&(__cov_eB9RHsg5wXgocQW6hl_8IA.b['6'][1]++,alt!=='')){__cov_eB9RHsg5wXgocQW6hl_8IA.b['5'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['36']++;M.editor_contenteditable.set_selection(M.contenteditable_image.selection);__cov_eB9RHsg5wXgocQW6hl_8IA.s['37']++;var imagehtml='<img src="'+Y.Escape.html(url)+'" alt="'+Y.Escape.html(alt)+'"';__cov_eB9RHsg5wXgocQW6hl_8IA.s['38']++;if(width){__cov_eB9RHsg5wXgocQW6hl_8IA.b['7'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['39']++;imagehtml+=' width="'+Y.Escape.html(width)+'"';}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['7'][1]++;}__cov_eB9RHsg5wXgocQW6hl_8IA.s['40']++;if(height){__cov_eB9RHsg5wXgocQW6hl_8IA.b['8'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['41']++;imagehtml+=' height="'+Y.Escape.html(height)+'"';}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['8'][1]++;}__cov_eB9RHsg5wXgocQW6hl_8IA.s['42']++;imagehtml+='"/>';__cov_eB9RHsg5wXgocQW6hl_8IA.s['43']++;if((__cov_eB9RHsg5wXgocQW6hl_8IA.b['10'][0]++,document.selection)&&(__cov_eB9RHsg5wXgocQW6hl_8IA.b['10'][1]++,document.selection.createRange().pasteHTML)){__cov_eB9RHsg5wXgocQW6hl_8IA.b['9'][0]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['44']++;document.selection.createRange().pasteHTML(imagehtml);}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['9'][1]++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['45']++;document.execCommand('insertHTML',false,imagehtml);}}else{__cov_eB9RHsg5wXgocQW6hl_8IA.b['5'][1]++;}},get_form_content:function(elementid){__cov_eB9RHsg5wXgocQW6hl_8IA.f['7']++;__cov_eB9RHsg5wXgocQW6hl_8IA.s['46']++;var content=Y.Node.create('<form>'+'<label for="urlentry">'+M.util.get_string('enterurl','contenteditable_image')+'</label><br/>'+'<input type="url" value="" id="urlentry" size="64"/>'+'<label for="altentry">'+M.util.get_string('enteralt','contenteditable_image')+'</label><br/>'+'<input type="text" value="" id="altentry" size="64" required="true"/>'+'<label for="widthentry">'+M.util.get_string('width','contenteditable_image')+'</label><br/>'+'<input type="text" value="" id="widthentry" size="10"/>'+'<br/>'+'<label for="heightentry">'+M.util.get_string('height','contenteditable_image')+'</label><br/>'+'<input type="text" value="" id="heightentry" size="10"/>'+'<br/>'+'<button id="openimagebrowser" data-editor="'+Y.Escape.html(elementid)+'">'+M.util.get_string('browserepositories','contenteditable_image')+'</button>'+'<hr/>'+'<button id="urlentrysubmit">'+M.util.get_string('createimage','contenteditable_image')+'</button>'+'</form>'+'<hr/>'+M.util.get_string('accessibilityhint','contenteditable_image'));__cov_eB9RHsg5wXgocQW6hl_8IA.s['47']++;content.one('#urlentrysubmit').on('click',M.contenteditable_image.set_image);__cov_eB9RHsg5wXgocQW6hl_8IA.s['48']++;content.one('#openimagebrowser').on('click',M.contenteditable_image.open_browser);__cov_eB9RHsg5wXgocQW6hl_8IA.s['49']++;return content;}});},'@VERSION@',{'requires':['node','escape']});
